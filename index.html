<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jessica & Christoph â€“ 20.06.2026</title>
  <style>
    body {
      background: #ffffff;
      color: #1e1e1e;
      font-family: 'Georgia', cursive;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      font-size: 2.8rem;
      color: #2a4d2a;
      margin-bottom: 0.2rem;
    }
    h2 {
      font-style: italic;
      color: #a17c00;
      margin-bottom: 2rem;
    }
    select, button {
      font-size: 1rem;
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      border-radius: 6px;
      border: 2px solid #2a4d2a;
      background: white;
      color: #2a4d2a;
      cursor: pointer;
    }
    button {
      background: #2a4d2a;
      color: white;
      border: none;
    }
    button:hover {
      background: #1e3d1e;
    }
    video, img {
      display: block;
      margin: 1rem auto;
      max-width: 90vw;
      border: 3px solid #2a4d2a;
      border-radius: 10px;
    }
    #message {
      margin-top: 1rem;
      font-weight: bold;
      color: #2a4d2a;
    }
  </style>
</head>
<body>
  <h1>Jessica & Christoph</h1>
  <h2>20.06.2026</h2>
  
  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>

  <div>
    <button id="frontBtn">Frontkamera</button>
    <button id="backBtn">RÃ¼ckkamera</button>
  </div>

  <button id="takePhotoBtn">Foto machen</button>
  <button id="uploadBtn" disabled>Hochladen</button>

  <img id="photo" alt="Aufgenommenes Foto" />

  <div id="message"></div>

  <script>
    const cameraSelect = document.getElementById('cameraSelect'),
          startBtn = document.getElementById('startBtn'),
          snapBtn  = document.getElementById('snapBtn'),
          uploadBtn= document.getElementById('uploadBtn'),
          video    = document.getElementById('video'),
          photo    = document.getElementById('photo'),
          message  = document.getElementById('message');
    let stream, blob;

    const DROPBOX_ACCESS_TOKEN = 'sl.u.AF2bQ_PFuopa1bJhEKpl4D98_IwNflkbsEHanHBl95Z8gFLXsyRr1Q95c4NaOYziu45tkte98L-mBXs8KTGj1P0EhNqW9AFo8w_3N2_jlPw53opeJEDLzKh5qgbVAvTEyZXRd9DZFzO0w0aSLQVyLMec2jZGwMAoHZ-ziQyMjHcPVcEzkcpWHL8UMuH-1GrmeOivI1gKrYkG2w_Q4fRjT70lBNqUJLpZMqP5fZbll08TR_5wQ4yMFF0Zc92nqVqCq8zZObUHI5PHeCxOkrVdK4l3seI-u52GyM6mk7Sb022fxtCieokGR4auYrEWP5YI7b9XeTAXLlxM8dl0gFbzj03yCZO9Dja41L55Rbj9s9NIxlVAmZcAGrj5ao_g_k76lfLh4N2VJ9Z7ihQJg2zB8CvgI55rGof4cFrmGQPUKgL21dMyJ2jxkghVkEWnl22PUVg-VunGnRb1uP1d06HOgJgAeUlGqBmS3yBXw6xGEoG-S3I-rikBZSNmWtRiLaahRIoJt8Et1WcPm-sCWJ3xYZinfBdMoz4xJkouDkiWXy232UljiO__ctyhAjVDx0jQgi1KXWk_EUbJtkfll8UDgmh7gn-EsY_bmwS4X1DZveKG5waAvL13X1B7F4Lm7o4V3ZzM55L2keHWsU-yn_X8Fso0P9hP_zQGVw7q15q1hvUC_SmskmVwZloo6mtQBLbfUIWChnz2clNNX-k0Ut0Q4bIYJCG34FFLR-gLWW-eKWUHhYoCTG1QncfFjDidh3mVEBVTwR3h3DbMVRgiydKToG2LG5I35fnpglWGfCa4qXs81jtjtv1JOFiYJ5mZ_nd4SUAOU_3JnnpA05Q-p7QYXKjRmfqj36ONsRap_0iFnY_1XAqEq2N4ohHzl32twJ3CiBX0KrlRRodgHNZtX8LMulSRmIW_Eq9sa9QXmBnOe92nuAr-VZQx84N1UO1wHN1n-JGMToVQ8TjAw2Ef-6dZt93VVOAB3Ric4f_PbiThG0iK8F2iY77a_tZHO3u1y0km8hQH4daDIF38Od1cH-FkVXeL8hz6kuSAsoo7n9LljOrIztytYQxHI0yiyTJkbsOomVFS_RMC5BBH7kk3ulsabFkvl_HS6bmNxw8R02V9Jrhlrrnnz3JJCchBVnSThKx7H3HL3UxyO2WD56C8caN5Ae4KuwuJotpC_t_qGn1-fCkpGsRbV93z3OVy-gbEQUHXiZ13ws0HE-mTG_FKjWcJgjtGsmAZn9RJH17d1t9Ai4QbpJd1jKy9lxThPdNi4fwX9eyeOPWYDAoC9CaMXH4hh4FI';

    async function listCameras() {
      const devices = await navigator.mediaDevices.enumerateDevices();
      devices.filter(d => d.kind === 'videoinput').forEach((d, i) => {
        const o = document.createElement('option');
        o.value = d.deviceId;
        o.text = d.label || `Kamera ${i + 1}`;
        cameraSelect.append(o);
      });
    }

    async function startCamera() {
      if (stream) stream.getTracks().forEach(t => t.stop());
      try {
        stream = await navigator.mediaDevices.getUserMedia({
          video: { deviceId: cameraSelect.value }
        });
        video.srcObject = stream;
        video.style.display = 'block';
        snapBtn.disabled = false;
        message.textContent = '';
      } catch {
        message.textContent = 'Kamera-Zugriff fehlgeschlagen';
      }
    }

    snapBtn.onclick = () => {
      const c = document.createElement('canvas');
      c.width = video.videoWidth;
      c.height = video.videoHeight;
      c.getContext('2d').drawImage(video, 0, 0);
      c.toBlob(b => {
        blob = b;
        photo.src = URL.createObjectURL(b);
        photo.style.display = 'block';
        uploadBtn.disabled = false;
      }, 'image/jpeg', 0.9);
      video.style.display = 'none';
    };

    uploadBtn.onclick = async () => {
      if (!blob) return;
      message.textContent = 'Lade hochâ€¦';
      const name = `JessicaChristoph_${Date.now()}.jpg`;
      try {
        const res = await fetch('https://content.dropboxapi.com/2/files/upload', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${DROPBOX_ACCESS_TOKEN}`,
            'Dropbox-API-Arg': JSON.stringify({
              path: '/' + name,
              mode: 'add',
              autorename: true,
              mute: false
            }),
            'Content-Type': 'application/octet-stream'
          },
          body: blob
        });
        if (!res.ok) throw '';
        message.textContent = 'Upload erfolgreich ðŸŽ‰';
        uploadBtn.disabled = true;
      } catch {
        message.textContent = 'Upload fehlgeschlagen';
      }
    };

    cameraSelect.onchange = startCamera;
    startBtn.onclick = startCamera;
    listCameras();
  </script>
</body>
</html>
